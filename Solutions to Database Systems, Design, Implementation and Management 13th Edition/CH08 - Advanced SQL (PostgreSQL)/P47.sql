CREATE TABLE MEMBERSHIP (
MEM_NUM INTEGER GENERATED BY DEFAULT AS IDENTITY (START 102 INCREMENT 1) PRIMARY KEY,
MEM_FNAME VARCHAR(25) NOT NULL,
MEM_LNAME VARCHAR(25) NOT NULL,
MEM_STREET VARCHAR(50),
MEM_CITY VARCHAR(25),
MEM_STATE CHAR(2),
MEM_ZIP CHAR(6),
MEM_BALANCE INTEGER DEFAULT 0
);

CREATE TABLE RENTAL (
RENT_NUM INTEGER GENERATED BY DEFAULT AS IDENTITY (START 1001 INCREMENT 1) PRIMARY KEY,
RENT_DATE DATE NOT NULL,
MEM_NUM INTEGER REFERENCES MEMBERSHIP (MEM_NUM) NOT NULL
);

CREATE TABLE PRICE (
PRICE_CODE INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
PRICE_DESCRIPTION VARCHAR(50),
PRICE_RENTFEE NUMERIC(3,1) NOT NULL,
PRICE_DAILYATEFEE NUMERIC(3,1) NOT NULL
);

CREATE TABLE MOVIE (
MOVIE_NUM INTEGER GENERATED BY DEFAULT AS IDENTITY (START 1234) PRIMARY KEY,
MOVIE_TITLE VARCHAR(50) NOT NULL,
MOVIE_YEAR NUMERIC(4,0),
MOVIE_COST NUMERIC(5,2) NOT NULL,
MOVIE_GENRE VARCHAR(30),
PRICE_CODE INTEGER REFERENCES PRICE (PRICE_CODE)
);

CREATE TABLE VIDEO (
VID_NUM INTEGER CHECK (VID_NUM > 9999) PRIMARY KEY,
VID_INDATE DATE,
MOVIE_NUM INTEGER REFERENCES MOVIE (MOVIE_NUM) NOT NULL
);

CREATE TABLE DETAILRENTAL (
RENT_NUM INTEGER REFERENCES RENTAL (RENT_NUM),
VID_NUM INTEGER REFERENCES VIDEO (VID_NUM),
DETAIL_FEE NUMERIC(3,1) NOT NULL,
DETAIL_DUEDATE DATE DEFAULT (CURRENT_DATE + 7),
DETAIL_RETURNDATE DATE,
DETAIL_DAILYLATEFEE NUMERIC(3,1),
PRIMARY KEY (RENT_NUM, VID_NUM)
);